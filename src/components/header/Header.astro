---
import Logo from "../../assets/logo.svg";
---

<header class="relative z-50 h-20">
  <div class="mx-auto flex max-w-6xl items-center justify-between px-6 py-4">
    <a href="/">
      <img src={Logo.src} alt="" class="w-17" />
    </a>

    <nav class="hidden items-center gap-6 md:flex">
      <a href="/" class="text-sm font-medium text-text-main hover:text-primary">
        Inicio
      </a>
      <a
        href="/negocios"
        class="text-sm font-medium text-text-main hover:text-primary"
      >
        Negocios
      </a>
      <a
        href="/farmacias"
        class="text-sm font-medium text-text-main hover:text-primary"
      >
        Farmacias
      </a>
      <a
        href="/telefonos"
        class="text-sm font-medium text-text-main hover:text-primary"
      >
        Teléfonos útiles
      </a>
    </nav>

    <button
      id="menu-button"
      class="relative h-6 w-6 md:hidden"
      aria-label="Abrir menú"
    >
      <span class="hamburger"></span>
    </button>
  </div>

  <div
    id="mobile-menu"
    class="absolute inset-x-0 top-full z-40 opacity-0 -translate-y-2 pointer-events-none transition-transform duration-300 ease-out"
  >
    <nav class="rounded-b-2xl bg-white/95 p-6 shadow-lg backdrop-blur">
      <div class="flex flex-col gap-4">
        <a href="/" class="text-sm font-medium text-text-main">Inicio</a>
        <a href="/negocios" class="text-sm font-medium text-text-main"
          >Negocios</a
        >
        <a href="/farmacias" class="text-sm font-medium text-text-main"
          >Farmacias</a
        >
        <a href="/telefonos" class="text-sm font-medium text-text-main">
          Teléfonos útiles
        </a>
      </div>
    </nav>
  </div>

  <style>
    .hamburger,
    .hamburger::before,
    .hamburger::after {
      content: "";
      position: absolute;
      left: 0;
      width: 100%;
      height: 2px;
      background: currentColor;
      transition:
        transform 0.3s ease,
        opacity 0.3s ease;
    }

    .hamburger {
      top: 50%;
      transform: translateY(-50%);
    }

    .hamburger::before {
      top: -8px;
    }

    .hamburger::after {
      top: 8px;
    }

    .open .hamburger {
      background: transparent;
    }

    .open .hamburger::before {
      transform: translateY(8px) rotate(45deg);
    }

    .open .hamburger::after {
      transform: translateY(-8px) rotate(-45deg);
    }
  </style>

  <script>
    const setupMobileMenu = () => {
      const button = document.getElementById("menu-button");
      const menu = document.getElementById("mobile-menu");

      if (!button || !menu) return;

      button.onclick = () => {
        const isOpen = menu.classList.contains("opacity-100");

        menu.classList.toggle("opacity-0", isOpen);
        menu.classList.toggle("-translate-y-2", isOpen);
        menu.classList.toggle("pointer-events-none", isOpen);

        menu.classList.toggle("opacity-100", !isOpen);
        menu.classList.toggle("translate-y-0", !isOpen);

        button.classList.toggle("open");
      };
    };

    setupMobileMenu();

    document.addEventListener("astro:page-load", setupMobileMenu);
  </script>
</header>
